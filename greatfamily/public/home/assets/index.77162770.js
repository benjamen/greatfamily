var h=(s,r,n)=>new Promise((o,e)=>{var t=c=>{try{u(n.next(c))}catch(m){e(m)}},i=c=>{try{u(n.throw(c))}catch(m){e(m)}},u=c=>c.done?o(c.value):Promise.resolve(c.value).then(t,i);u((n=n.apply(s,r)).next())});import{c as d,r as y,a as L,b as v,d as k,_ as E,e as P,o as w,f as b,g as I,h as C,s as R,i as q,j as O,C as S,I as A,k as $}from"./vendor.a7bd1854.js";const j=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}};j();const x="modulepreload",_={},B="/assets/greatfamily/home/",N=function(r,n){return!n||n.length===0?r():Promise.all(n.map(o=>{if(o=`${B}${o}`,o in _)return;_[o]=!0;const e=o.endsWith(".css"),t=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${t}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":x,e||(i.as="script",i.crossOrigin=""),i.href=o,document.head.appendChild(i),e)return new Promise((u,c)=>{i.addEventListener("load",u),i.addEventListener("error",c)})})).then(()=>r())},p=d({url:"frappe.auth.get_logged_user",cache:"User",onError(s){s&&s.exc_type==="AuthenticationError"&&f.push({name:"LoginPage"})}});function g(){let r=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return r==="Guest"&&(r=null),r}const l=y({login:d({url:"login",makeParams({email:s,password:r}){return{usr:s,pwd:r}},onSuccess(s){p.reload(),l.user=g(),l.login.reset(),f.replace(s.default_route||"/")}}),logout:d({url:"logout",onSuccess(){p.reset(),l.user=g(),f.replace({name:"Login"})}}),user:g(),isLoggedIn:L(()=>!!l.user)}),U=[{path:"/",name:"Home",component:()=>N(()=>import("./Home.1502965f.js"),["assets/Home.1502965f.js","assets/vendor.a7bd1854.js","assets/vendor.997fa92b.css"]),meta:{requiresLogin:!1}},{path:"/books",name:"Books",meta:{requiresLogin:!0}}];let f=v({history:k("/home"),routes:U});f.beforeEach((s,r,n)=>h(void 0,null,function*(){let o=l.isLoggedIn;try{yield p.promise}catch(e){o=!1}s.meta.requiresLogin&&!o&&(window.location.href="/login?redirect-to=/home"),n()}));const H={};function F(s,r){const n=P("router-view");return w(),b("div",null,[I(n)])}var V=E(H,[["render",F]]);let a=C(V);R("resourceFetcher",$);a.use(f);a.use(q);a.component("Button",O);a.component("Card",S);a.component("Input",A);a.mount("#app");
